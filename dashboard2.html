<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Homepage</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
    <header>
        <div>
            <h1>Contro.Map.</h1>
        </div>
        <br>
        <div>
            <h2>Hey, <b><span id="usernameSpan">mapper.</span></b></h2>
        </div>
        <div>
            <a href="index4.html">
                <button id="logout">Logout</button>
            </a>
        </div>
    </header>

    <main>

        <div class="content">
            <svg id="contromap" width="1150" height="900"></svg>
        </div>

        <div class="sidebar">

        <div class=sidebar>
            <button class="sidebar button"><img src="https://img.icons8.com/?size=100&id=04GM3va536LJ&format=png&color=000000" alt="Corn">Corn</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="what_is_departmentstore">What is a department store in an urban area?</label>
        <input type="text" id="what_is_departmentstore_input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=GeeWqr07j0wV&format=png&color=000000" alt="Dress">Dress</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=cyquzyDQApLb&format=png&color=0000000" alt="Closed">Vacancy</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=DjtFm0vkHkvo&format=png&color=000000" alt="Toy">Toy</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=Zeaw4rsn0eQX&format=png&color=000000" alt="Plant">Plant</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=9TghxfVRENeF&format=png&color=000000" alt="Car">Car</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=kOx43Y29fqm6&format=png&color=000000" alt="Stats">Stats</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

         <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=7j3u1nyS3RXT&format=png&color=000000" alt="Tools">Tools</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

         <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=R9v8TF6MUeVI&format=png&color=000000" alt="CD">CD</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=RwjIfAOPmj5C&format=png&color=000000" alt="Needle">Needle</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

         <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=voX0OBuEQAUR&format=png&color=000000" alt="Web">Web</button>
        </div>
        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=11fjR6L6CDE3&format=png&color=000000" alt="Shop">Local Shop</button>
        </div><div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

         <div class=sidebar>
           <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=CO9dLZvBwrax&format=png&color=000000" alt="Basket">Basket</button>
        </div><div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=RHuAUueLuyds&format=png&color=000000" alt="Art">Art</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>
        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=59VPHq0GnZg2&format=png&color=000000" alt="Bank">Bank</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=oVIY4QlHcGyp&format=png&color=0000000" alt="Wreckingball">Wrecking Ball</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=DkRYMLkNs6mJ&format=png&color=0000000" alt="CO2-Reduction">Environment</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=RaSfksXeBEPt&format=png&color=000000" alt="Lorry">Transport</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=5VKlSNjaWyBH&format=png&color=000000" alt="Ruler">Distance</button>
        </div>


        <div class=sidebar>
           <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=u2s1FIIaxfQD&format=png&color=000000" alt="Click">Order</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=3xYa6spPmTsU&format=png&color=0000000" alt="Sale">Sales</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
           <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=r5TsdSWSeZkG&format=png&color=000000" alt="Noodles">Food</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=6kJnHQIB4H6K&format=png&color=0000000" alt="360degree">VR & AR</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=QZVRMHQrfoDa&format=png&color=000000" alt="Aim">Aim</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=vtQuEwmsWKN0&format=png&color=000000" alt="Bricks">Building</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
           <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=SSmstp9CWcGU&format=png&color=000000" alt="Internet">Online-shopping</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=l6BnbcAvf8VV&format=png&color=000000" alt="Coin">Money</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=m3OYxqjCPokO&format=png&color=000000" alt="Pretzel">Pretzel</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

        <div class=sidebar>
            <button class="sidebar button" id="btn-dress" data-field:dress><img src="https://img.icons8.com/?size=100&id=wIbIiPoKWchh&format=png&color=000000" alt="World">Global</button>
        </div>
        <div class="forms-container" style="display: none;">
    <div id="form-commerce" class="form hidden">
        <label for="commerce-input">What do you think about e-commerce?</label>
        <input type="text" id="commerce-input" placeholder="Type something..." />
        <button class="submit" data-field="commerce">Submit</button>
    </div>
</div>

    </main>
    <footer>
        <h4> <b> &copy; 2025 Controversy Mapping.</b> <br> Technical University of Munich, Chair of Architectural Informatics, Prof. Dipl.-Ing. Frank Petzold. <br><br> Gustave Lahon, Maxim Yurin.<br><br>All Rights Reserved.</h4>
    </footer>

<script type="module" src="force5.js"></script>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js";
import {getAuth, onAuthStateChanged, signOut} from "https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js";
import{getFirestore, getDoc, doc} from "https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js"

const firebaseConfig = {
    apiKey: "AIzaSyB3Vn9jXSJnQ0XC8JM64OszHpNEkvViBxA",
    authDomain: "mapping-controversies.firebaseapp.com",
    projectId: "mapping-controversies",
    storageBucket: "mapping-controversies.appspot.com",
    messagingSenderId: "259825186402",
    appId: "1:259825186402:web:7c38048d67546fbe9b833b",
    measurementId: "G-Q0WM4CNVM4"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

onAuthStateChanged(auth, (user)=>{
 const loggedInUserId=localStorage.getItem('username');
        if(loggedInUserId){
                console.log(user);
                const docRef = doc(db, "mappers", loggedInUserId);
                getDoc(docRef)
                .then((docSnap)=>{
                        if(docSnap.exists()){
                                const userData=docSnap.data();
                                document.getElementById('email').innerText=userData.email;
                                document.getElementById('username').innerText=userData.username;
                        }
                        else{
                                console.log("doesn't exist")
                        }
                })
                .catch((error)=>{
                        console.log("no worko");
                })
        }
        else{
                console.log("void")
        }
    })
    // Set username on page load
    window.onload = function () {
        const storedUsername = localStorage.getItem('username'); // Retrieve username
        const usernameSpan = document.getElementById('usernameSpan'); // Use the id

        if (storedUsername) {
            usernameSpan.textContent = storedUsername; // Set username
        } else {
            usernameSpan.textContent = "mapper."; // Default greeting
        }
    };

const logoutButton=document.getElementById('logout');

    logoutButton.addEventListener('click',()=>{
        localStorage.removeItem('username');
        signOut(auth)
        .then(()=>{
                window.location.href='index4.html';
        })
        .catch((error)=>{
                console.error('Error Signing out:', error);
        })
</script>
</body>

</html>

